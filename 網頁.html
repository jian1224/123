<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>表情符號切換小工具</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #fefefe;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #333;
    }
    #search {
      padding: 10px;
      width: 60%;
      font-size: 16px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    #random-btn, #copy-btn, #toggle-btn {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    #random-btn {
      background-color: #FF9800;
      color: white;
    }
    #copy-btn {
      background-color: #2196F3;
      color: white;
    }
    #toggle-btn {
      background-color: #9C27B0;
      color: white;
    }
    #emoji-display {
      margin-top: 20px;
      font-size: 2rem;
      padding: 20px;
      background: #fff;
      display: inline-block;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      min-width: 200px;
    }
    @media (max-width: 600px) {
      #search {
        width: 90%;
      }
      #emoji-display {
        min-width: auto;
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <h1>表情隨機推薦 + 搜尋工具</h1>
  <input type="text" id="search" placeholder="輸入情緒或關鍵字搜尋..." oninput="searchFaces()" />
  <br />
  <button id="random-btn" onclick="showRandomFace()">隨機推薦</button>
  <button id="toggle-btn" onclick="toggleMode()">切換為 Emoji 模式</button>
  <button id="copy-btn" onclick="copyToClipboard()">複製表情</button>

  <div id="emoji-display">點上方按鈕隨機推薦一個表情！</div>

  <h2>最近使用的表情</h2>
  <div id="recent-faces"></div>

  <script>
    let mode = 'kaomoji'; // kaomoji or emoji
    const recentFaces = [];

    const kaomojiData = {
      "快樂": ["(＾▽＾)", "ヽ(・∀・)ﾉ", "(*≧ω≦)", "(o^▽^o)", "(*´∀｀*)"],
      "悲傷": ["(T_T)", "(；ω；)", "(ಥ﹏ಥ)"],
      "生氣": ["(╬ಠ益ಠ)", "(ノಠ益ಠ)ノ彡┻━┻"],
      "戀愛": ["(♡˙︶˙♡)", "(｡♥‿♥｡)"],
      "害羞": ["(///∇///)", "(≧∇≦)", "(⁄ ⁄•⁄ω⁄•⁄ ⁄)"],
      "驚訝": ["(⊙_☉)", "(o_O)", "(ﾟдﾟ)"]
    };

    const emojiData = {
      "快樂": ["😄", "😁", "😊", "😆"],
      "悲傷": ["😢", "😭", "😞", "😔"],
      "生氣": ["😠", "😡", "🤬"],
      "戀愛": ["😍", "😘", "❤️"],
      "害羞": ["😳", "😊", "😚"],
      "驚訝": ["😱", "😮", "😲"]
    };

    function getCurrentData() {
      return mode === 'kaomoji' ? kaomojiData : emojiData;
    }

    function showRandomFace() {
      const data = getCurrentData();
      const categories = Object.keys(data);
      const cat = categories[Math.floor(Math.random() * categories.length)];
      const faces = data[cat];
      const random = faces[Math.floor(Math.random() * faces.length)];
      document.getElementById("emoji-display").innerText = random;
      addToRecent(random);
    }

    function searchFaces() {
      const data = getCurrentData();
      const query = document.getElementById("search").value.trim().toLowerCase();
      if (!query) return;
      for (const category in data) {
        if (category.toLowerCase().includes(query)) {
          const random = data[category][Math.floor(Math.random() * data[category].length)];
          document.getElementById("emoji-display").innerText = random;
          addToRecent(random);
          return;
        }
      }
      document.getElementById("emoji-display").innerText = "找不到對應的情緒 (´・ω・` )";
    }

    function toggleMode() {
      mode = mode === 'kaomoji' ? 'emoji' : 'kaomoji';
      document.getElementById("toggle-btn").innerText = mode === 'kaomoji' ? '切換為 Emoji 模式' : '切換為 顏文字 模式';
      document.getElementById("emoji-display").innerText = mode === 'kaomoji'
        ? '目前是 顏文字 模式 (⌒▽⌒)☆'
        : '目前是 Emoji 模式 😀';
    }

    function addToRecent(face) {
      recentFaces.unshift(face);
      if (recentFaces.length > 5) recentFaces.pop();
      updateRecentFaces();
    }

    function updateRecentFaces() {
      const recentContainer = document.getElementById("recent-faces");
      recentContainer.innerHTML = recentFaces.map(face => `<span>${face}</span>`).join(' ');
    }

    function copyToClipboard() {
      const text = document.getElementById("emoji-display").innerText;
      if (text.trim()) {
        navigator.clipboard.writeText(text).then(() => {
          alert("已複製到剪貼簿！\n" + text);
        });
      }
    }
  </script>
</body>
</html>
